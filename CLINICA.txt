use master
go
CREATE DATABASE HERRERA_CLINICA
GO
USE HERRERA_CLINICA
GO
CREATE TABLE PAIS(
ID_PAIS INT NOT NULL PRIMARY KEY IDENTITY (1,1),
NOMBRE VARCHAR (20) NOT NULL,
)
GO
CREATE TABLE USUARIO(
ID_USUARIO INT NOT NULL PRIMARY KEY IDENTITY (1,1),
USUARIO VARCHAR (20) NOT NULL,
CONTRASENIA VARCHAR (8) NOT NULL,
ESTADO BIT NOT NULL,
)
GO
CREATE TABLE ESPECIALIDAD(
ID_ESPECIALIDAD INT NOT NULL PRIMARY KEY IDENTITY (1,1),
NOMBRE VARCHAR (30) NOT NULL,
)
GO
CREATE TABLE MEDICO(
ID_MEDICO INT NOT NULL PRIMARY KEY IDENTITY (1,1),
DNI VARCHAR(8) NOT NULL UNIQUE,
APELLIDO VARCHAR (20) NOT NULL,
NOMBRES VARCHAR (40) NOT NULL,
FECHA_NAC SMALLDATETIME NOT NULL, 
SEXO CHAR NOT NULL CHECK (SEXO = 'M' OR SEXO = 'F'),
TELEFONO VARCHAR (15) NOT NULL,
EMAIL VARCHAR (30) NOT NULL,
NACIONALIDAD INT NOT NULL FOREIGN KEY REFERENCES PAIS (ID_PAIS),
ID_ESPECIALIDAD INT NOT NULL FOREIGN KEY REFERENCES ESPECIALIDAD (ID_ESPECIALIDAD),
ESTADO BIT NOT NULL,
)
GO
CREATE TABLE PACIENTE(
ID_PACIENTE BIGINT NOT NULL PRIMARY KEY IDENTITY (1,1),
DNI VARCHAR(8) NOT NULL UNIQUE ,
APELLIDO VARCHAR (20) NOT  NULL,
NOMBRES VARCHAR (30) NOT  NULL,
FECHA_NAC SMALLDATETIME  NOT NULL,
SEXO CHAR NOT NULL CHECK (SEXO ='M' OR SEXO = 'F'), 
TELEFONO VARCHAR (15) NOT NULL,
EMAIL VARCHAR (30) NOT NULL,
NACIONALIDAD INT NOT NULL FOREIGN KEY REFERENCES PAIS (ID_PAIS),
ESTADO BIT NOT NULL,
)
GO
CREATE TABLE ADMINISTRATIVO(
ID_ADMINISTRATIVO BIGINT NOT NULL PRIMARY KEY IDENTITY (1,1),
DNI VARCHAR(8) NOT NULL UNIQUE ,
APELLIDO VARCHAR (20) NOT  NULL,
NOMBRES VARCHAR (30) NOT  NULL,
FECHA_NAC SMALLDATETIME  NOT NULL,
SEXO CHAR NOT NULL CHECK (SEXO ='M' OR SEXO = 'F'), 
TELEFONO VARCHAR (15) NOT NULL,
EMAIL VARCHAR (30) NOT NULL,
NACIONALIDAD INT NOT NULL FOREIGN KEY REFERENCES PAIS (ID_PAIS),
ID_USUARIO INT NOT NULL FOREIGN KEY REFERENCES USUARIO (ID_USUARIO), 
ESTADO BIT  NOT NULL,
)
GO
CREATE TABLE TURNO(
ID_TURNO BIGINT NOT NULL PRIMARY KEY IDENTITY (1,1),
FECHA_TURNO  SMALLDATETIME NOT NULL ,
ID_ESPECILIDAD INT NOT NULL FOREIGN KEY REFERENCES ESPECIALIDAD (ID_ESPECIALIDAD),
ID_PACIENTE BIGINT NOT NULL FOREIGN KEY REFERENCES PACIENTE(ID_PACIENTE),
MOTIVO_TURNO VARCHAR(100) NOT NULL,
ESTADO BIT NOT NULL,
)
GO
CREATE TABLE HISTORIA_CLINICA(
ID_PACIENTE BIGINT NOT NULL FOREIGN KEY REFERENCES PACIENTE(ID_PACIENTE),
FECHA_TURNO  SMALLDATETIME NOT NULL ,
ID_ESPECILIDAD INT NOT NULL FOREIGN KEY REFERENCES ESPECIALIDAD (ID_ESPECIALIDAD),
ID_TURNO BIGINT NOT NULL FOREIGN KEY REFERENCES TURNO (ID_TURNO), 
DIAGNOSTICO VARCHAR (100) NOT NULL,
)

GO
CREATE PROCEDURE  AltaMedico
@dni varchar(8),
@apellido varchar(20),
@nombres varchar(40),
@fecha_nac smalldatetime,
@sexo char,
@telefono varchar(15),
@email varchar(30),
@nacionalidad int,
@id_especialidad int
as insert into MEDICO VALUES(@dni,@apellido ,@nombres ,@fecha_nac ,@sexo ,@telefono ,@email ,@nacionalidad,@id_especialidad,1)

GO
CREATE PROCEDURE  ModificarMedico
@id_medico int,
@dni varchar(8),
@apellido varchar(20),
@nombres varchar(40),
@fecha_nac smalldatetime,
@sexo char,
@telefono varchar(15),
@email varchar(30),
@nacionalidad int,
@id_especialidad int
as update MEDICO set @dni=dni,@apellido=apellido ,@nombres=nombres ,@fecha_nac=fecha_nac ,@sexo=sexo ,@telefono=telefono ,@email=email ,@nacionalidad=nacionalidad,@id_especialidad=id_especialidad where  @id_medico = id_medico

 

INSERT INTO USUARIO VALUES('MEDICO 1','32724404',0)
INSERT INTO USUARIO VALUES('MEDICO 2','27383794',0)

INSERT INTO PAIS VALUES('ARGENTINA')
INSERT INTO PAIS VALUES ('BRASIL')
INSERT INTO PAIS VALUES ('ESTADOS UNIDOS')
INSERT INTO PAIS VALUES ('CHILE')

INSERT INTO ESPECIALIDAD VALUES ('TRAUMATOLOGIA')
INSERT INTO ESPECIALIDAD VALUES ('PEDIATRIA')
INSERT INTO ESPECIALIDAD VALUES ('ODNTOLOGIA')
INSERT INTO ESPECIALIDAD VALUES ('CLINICO')
INSERT INTO ESPECIALIDAD VALUES ('DERMATOLOGIA')
INSERT INTO ESPECIALIDAD VALUES ('CARDIOLOGIA')

INSERT INTO MEDICO VALUES ('32724404','HERRERA','ALEJANDRO NICOLAS','04/11/1986','M','11223321','ALEH07@HOTMAIL.COM',1,1,1)
INSERT INTO MEDICO VALUES ('27383794','LUCERO','PAOLA DANIELA','03/11/1979','F','11221121','PAO@HOTMAIL.COM',2,1,1)

INSERT INTO PACIENTE VALUES ('33654876','GOROSTIAGA','EDUARDO ALBERTO','12/12/1976','M','1144332255','GOROS@HOTMAIL.COM',3,1)

INSERT INTO ESPECIALIDAD VALUES ('TRAUMATOLOGIA')
INSERT INTO ESPECIALIDAD VALUES ('PEDIATRIA')
INSERT INTO ESPECIALIDAD VALUES ('ODNTOLOGIA')
INSERT INTO ESPECIALIDAD VALUES ('CLINICO')
INSERT INTO ESPECIALIDAD VALUES ('DERMATOLOGIA')
INSERT INTO ESPECIALIDAD VALUES ('CARDIOLOGIA')
